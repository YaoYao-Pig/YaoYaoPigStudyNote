# Dx12和OpenGL的区别

1. 编程范式的转变

   OpenGL是一个由驱动维护的状态机，比如在OpenGL当中，如果要切换状态，用户必须要一条一条命令，一个一个函数设置。

   ```c++
   // 伪代码：旧模式下设置渲染状态
   SetBlendMode(BLEND_ALPHA);       // 设置混合模式
   EnableDepthTest(true);         // 开启深度测试
   SetCullMode(CULL_BACK);          // 设置背面剔除
   // ...可能还有几十个类似的状态设置函数
   DrawMyObject();                  // 在当前状态下绘制
   ```

   每次调用函数，驱动程序都可能需要检查当前状态并进行一些内部调整。成百上千次的状态调用会累积巨大的CPU开销。

   而Dx12则是，一种描述符初始化，用户要先填写一系列的结构体，最后打包一个PSO结构体，然后设置PSO，这样驱动在切换的时候就已经知道了全部的状态信息。那么就可以做一些优化了。（实际上是一个由用户控制的状态机）

   > PSO模式将这个过程从**“一个在绘制时由驱动主导的、动态零散的对话”**，转变成了**“一个在创建时由应用主导的、静态完整的命令”**。