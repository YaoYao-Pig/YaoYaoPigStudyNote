# 盛趣 2025.2.19 龙之谷C++客户端 一面（30min）

1. 问项目：

   1. 如何实现随机地图生成的	

   2. 特效有没有做LOD

   3. UI是如何管理的

2. 场景：有很多UI，有的UI长期存在，有的UI之间互相排斥，设计一个UIManager，UnityUI如何设计。

3. XLua是如何调用C#的对象和方法

4. HotFix热更的原理：HotFix是如何覆盖更新函数的

   1. https://blog.51cto.com/u_12868/7565884

5. 讲讲GC：C#GC的缺点。大世界因为GC导致的卡顿如何解决。https://zhuanlan.zhihu.com/p/72802332

   1. 缺点：

      1. 不确定的回收时间

         > 垃圾回收的一个主要缺点是其回收时间的不确定性。由于垃圾回收是在后台进行的，并且是由垃圾回收器根据其算法来决定何时进行回收操作的，因此开发者无法精确预测对象何时会被回收。这种不确定性在实时系统中尤为突出，因为实时系统对延迟有着严格的要求。如果垃圾回收发生在关键任务执行期间，可能会导致不可接受的性能下降或响应延迟。
         >

      2. 性能开销大

         > 垃圾回收过程中涉及大量的计算工作，包括标记活动对象、复制非活动对象以及清理不再使用的空间等。这些操作需要消耗CPU资源并可能暂时中断程序执行。在高负载或内存紧张的情况下，频繁的垃圾回收可能会导致系统性能下降。为了缓解这一问题，开发者可以通过优化代码、减少不必要的对象创建以及调整垃圾回收器的配置来减轻性能开销的影响。
         >

   2. 缺点延申：如何解决

      1. https://blog.csdn.net/weixin_45121123/article/details/107780633
      2. https://blog.csdn.net/enternalstar/article/details/106999617
      3. 避免装箱拆箱->慎用串拼接：缓存、Text组件拆分、使用StringBuild、Debug.Log接口封装（打Conditional标签）
      4. 警惕协程：StartCoroutine有GC、yield return带返回值有GC、yield return new xxx有GC（最好自己做一套协程管理）。协程的返回值迭代器每次都有一个GC开销
      5. foreach：unity5.5之前版本有GC，使用for循环或者获取迭代器
      6. 对象池
      7. 结构体数组：如果结构体中含有引用类型变量，对结构体数组进行拆分，避免GC时遍历所有结构体成员
      8. 在游戏空闲（如场景切换时）强制执行GC
      9. 尽量为需要长时间存活的资源创建大对象。（>=85000字节的对象为大对象）

   3. 对比Lua的GC：C#会有一个压缩的过程




闲聊：

为什么做游戏？

游戏行业不景气，如何看待：热爱



反问：

业务：ARPG，游戏迁移，自研引擎，端转双端

表现：

1. 有热情
2. 可能是因为自己做的项目的原因业务场景比较局限，都有涉及但是不够深入

