# ugui mask å’Œmask2DåŒºåˆ«å®ç°ï¼Œimage rawimageåŒºåˆ«ï¼Œ



###### ChatGPT è¯´ï¼š

ChatGPT

å¤ªå¥½äº†ï¼è¿™ä¸ªè¯é¢˜å¾ˆæœ‰æ„æ€ï¼Œç‰¹åˆ«æ˜¯åœ¨ Unity å¼€å‘ä¸­ï¼Œç†è§£è¿™äº›ç»†å¾®çš„å·®å¼‚èƒ½å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´ä¼˜åŒ–ã€æ›´çµæ´»çš„ä»£ç ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¥æ¢ç´¢å§ï¼ğŸ¯

------

## **1. UGUI Mask å’Œ Mask2D çš„åŒºåˆ«**

MaskåŸºäºæ¨¡æ¿æµ‹è¯•

RectMask2DåŸºäºçŸ©å½¢è£åˆ‡

Maskè¦å¤šä¸€ä¸ªDrawcallç”¨æ¥å¾€æ¨¡æ¿ç¼“å†²åŒºå†™å…¥æ•°æ®

https://blog.csdn.net/qq_58047420/article/details/139908956?spm=1001.2101.3001.6650.3&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-3-139908956-blog-131171958.235%5Ev43%5Epc_blog_bottom_relevance_base6&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-3-139908956-blog-131171958.235%5Ev43%5Epc_blog_bottom_relevance_base6&utm_relevant_index=6

## **2. Image å’Œ RawImage çš„åŒºåˆ«**

**Image** å’Œ **RawImage** éƒ½æ˜¯ç”¨æ¥æ˜¾ç¤ºå›¾ç‰‡çš„ UI ç»„ä»¶ï¼Œä½†æœ‰ä¸€äº›å…³é”®åŒºåˆ«ï¼

### **Image**

- **ç”¨é€”**ï¼š
  ç”¨æ¥æ˜¾ç¤º **ç²¾çµå›¾ï¼ˆSpriteï¼‰**ï¼Œé€šå¸¸ç”¨äº UI å…ƒç´ ï¼Œæ¯”å¦‚æŒ‰é’®ã€èƒŒæ™¯ç­‰ã€‚

- **ç‰¹ç‚¹**ï¼š

  - **æ”¯æŒä¹å®«æ ¼åˆ‡ç‰‡ï¼ˆ9-slicingï¼‰**ï¼Œå¯ä»¥çµæ´»è°ƒæ•´ UI å…ƒç´ å¤§å°è€Œä¸å˜å½¢ã€‚
  - **æ”¯æŒå¡«å……æ–¹å¼**ï¼ˆæ¯”å¦‚å¡«å……æ¡ã€åœ†å½¢è¿›åº¦æ¡ï¼‰ã€‚
  - **å¯ä»¥æ­é… Mask ä½¿ç”¨**ï¼Œæ”¯æŒç®€å•é®ç½©ã€‚
  - **æ•ˆç‡è¾ƒé«˜**ï¼Œå› ä¸º Sprite æ˜¯ Unity å†…å»ºä¼˜åŒ–æ ¼å¼ã€‚

- **ç¤ºä¾‹**ï¼š

  ```
  csharpå¤åˆ¶ç¼–è¾‘Image img = gameObject.AddComponent<Image>();
  img.sprite = Resources.Load<Sprite>("MySprite");
  img.type = Image.Type.Sliced; // ä½¿ç”¨ä¹å®«æ ¼åˆ‡ç‰‡
  ```

### **RawImage**

- **ç”¨é€”**ï¼š
  ç”¨æ¥æ˜¾ç¤º **åŸå§‹çº¹ç†ï¼ˆTextureï¼‰**ï¼Œé€šå¸¸ç”¨äºæ˜¾ç¤ºé Sprite èµ„æºï¼Œæ¯”å¦‚ **RenderTexture** æˆ–è€… **å¤–éƒ¨åŠ è½½çš„å›¾ç‰‡**ã€‚

- **ç‰¹ç‚¹**ï¼š

  - **ä¸æ”¯æŒä¹å®«æ ¼åˆ‡ç‰‡**ï¼Œåªæ˜¾ç¤ºå®Œæ•´çº¹ç†ã€‚
  - **çµæ´»æ€§æ›´é«˜**ï¼Œå¯ä»¥æ˜¾ç¤º **RenderTexture**ï¼Œé€‚åˆæ˜¾ç¤ºå®æ—¶æ¸²æŸ“å†…å®¹ã€‚
  - **æ²¡æœ‰ Image çš„å¡«å……æ¨¡å¼**ï¼Œç®€å•ç›´æ¥ã€‚
  - **å¯èƒ½éœ€è¦é¢å¤–çš„å›¾åƒå¤„ç†**ï¼Œæ¯”å¦‚è°ƒæ•´ UVã€‚

- **ç¤ºä¾‹**ï¼š

  ```
  csharpå¤åˆ¶ç¼–è¾‘RawImage rawImg = gameObject.AddComponent<RawImage>();
  rawImg.texture = Resources.Load<Texture>("MyTexture");
  ```

------

## **æ€»ç»“å¯¹æ¯”**

| **ç‰¹æ€§**     | **UGUI Mask**    | **Mask2D**             | **Image**      | **RawImage**         |
| ------------ | ---------------- | ---------------------- | -------------- | -------------------- |
| **å®ç°æ–¹å¼** | è£å‰ªï¼ˆClippingï¼‰ | Shader                 | æ˜¾ç¤º Sprite    | æ˜¾ç¤º Texture         |
| **æ”¯æŒå½¢çŠ¶** | çŸ©å½¢             | ä»»æ„ï¼ˆè§† Shader è€Œå®šï¼‰ | ä¹å®«æ ¼         | åŸå§‹çº¹ç†             |
| **ä½¿ç”¨åœºæ™¯** | ç®€å• UI é®ç½©     | å¤æ‚é®ç½©               | UI å…ƒç´         | æ¸²æŸ“å†…å®¹ã€è§†é¢‘ç­‰     |
| **æ€§èƒ½**     | é«˜               | è§† Shader å¤æ‚åº¦       | é«˜             | è¾ƒä½ï¼ˆéœ€è§†å…·ä½“æƒ…å†µï¼‰ |
| **ç‰¹ç‚¹**     | ç¡¬è£å‰ª           | æ¸å˜æ•ˆæœ               | æ”¯æŒåˆ‡ç‰‡ã€å¡«å…… | çµæ´»å±•ç¤ºçº¹ç†         |

------

å¸Œæœ›è¿™äº›å¯¹ä½ æœ‰å¸®åŠ©ï¼å¦‚æœä½ åœ¨é¡¹ç›®ä¸­é‡åˆ°ä»€ä¹ˆç‰¹åˆ«çš„æƒ…å†µï¼Œæˆ–è€…æœ‰å…·ä½“éœ€æ±‚éœ€è¦æ¢è®¨ï¼Œå°½ç®¡å‘Šè¯‰æˆ‘å“¦ï¼ğŸŒ±å’±ä»¬å¯ä»¥ä¸€èµ·æ·±å…¥æŒ–æ˜ä¸€ä¸‹ï¼Happy coding! ğŸ®ğŸŒŸ



2/2









##### æ‚¨è¯´ï¼š

Maskæ˜¯é€šè¿‡æ¨¡æ¿æµ‹è¯•å®ç°çš„å—ï¼ŒRectMask2Dæ˜¯é€šè¿‡å‰”é™¤å®ç°çš„å—



###### ChatGPT è¯´ï¼š

ChatGPT

æ˜¯çš„ï¼Œ**UGUI çš„ `Mask` ç»„ä»¶æ˜¯é€šè¿‡æ¨¡æ¿æµ‹è¯•ï¼ˆStencil Testï¼‰å®ç°çš„ï¼Œè€Œ `RectMask2D` æ˜¯é€šè¿‡å‰”é™¤ï¼ˆClippingï¼‰å®ç°çš„**ã€‚è®©æˆ‘ä»¬è¯¦ç»†è§£æå®ƒä»¬çš„åº•å±‚åŸç†ã€‚

------

## **1. `Mask` ç»„ä»¶ï¼ˆStencil Test å®ç°ï¼‰**

### **åŸç†**

- **åŸºäº Stencil Bufferï¼ˆæ¨¡æ¿ç¼“å†²åŒºï¼‰** å®ç°é®ç½©ã€‚
- é€šè¿‡ **Stencil Testï¼ˆæ¨¡æ¿æµ‹è¯•ï¼‰** å…è®¸æˆ–ç¦æ­¢æ¸²æŸ“æŸäº›åƒç´ ã€‚
- `Mask` ç»„ä»¶ **ä¸å½±å“ UI ç»„ä»¶çš„é¡¶ç‚¹æ•°æ®**ï¼Œå®ƒåªæ˜¯é™åˆ¶å“ªäº›åƒç´ å¯ä»¥ç»˜åˆ¶å‡ºæ¥ã€‚

### **å·¥ä½œæµç¨‹**

1. **`Mask` ç»„ä»¶é¦–å…ˆæ¸²æŸ“è‡ªèº«ï¼ˆé€šå¸¸æ˜¯ `Image` ç»„ä»¶ï¼‰ï¼Œå¹¶å†™å…¥ Stencil Bufferã€‚**

2. æ‰€æœ‰ Mask çš„å­å…ƒç´ 

   ï¼ˆå¦‚ 

   ```
   Image
   ```

   ã€

   ```
   Text
   ```

    ç­‰ï¼‰åœ¨æ¸²æŸ“æ—¶ï¼Œ

   æ ¹æ® Stencil Test å†³å®šæ˜¯å¦æ¸²æŸ“

   ï¼š

   - åªæœ‰ Stencil Buffer å…è®¸çš„åŒºåŸŸï¼Œå­å…ƒç´ æ‰ä¼šè¢«æ¸²æŸ“ã€‚

3. **åœ¨ Mask ç»„ä»¶å¤–çš„åƒç´ ä¼šè¢«ä¸¢å¼ƒ**ï¼Œè¾¾åˆ°é®ç½©æ•ˆæœã€‚

### **Stencil æµç¨‹**

- **Mask ç»„ä»¶**ï¼šè®¾ç½® Stencil Bufferï¼ˆå†™å…¥ç‰¹å®šçš„ Stencil å€¼ï¼‰ã€‚
- **è¢«é®ç½©çš„ UI å…ƒç´ **ï¼šåœ¨æ¸²æŸ“æ—¶æ£€æŸ¥ Stencil Bufferï¼ˆå¦‚æœå€¼åŒ¹é…ï¼Œåˆ™å…è®¸æ¸²æŸ“ï¼‰ã€‚

### **ç¤ºä¾‹ï¼ˆShader ä»£ç ç‰‡æ®µï¼‰**

```
glslå¤åˆ¶ç¼–è¾‘Stencil {
    Ref 1          // Stencil å€¼è®¾ä¸º 1
    Comp equal     // ä»…å½“ Stencil å€¼ç­‰äº 1 æ—¶æ‰æ¸²æŸ“
    Pass replace   // é€šè¿‡æµ‹è¯•åï¼Œå†™å…¥æ–°çš„ Stencil å€¼
}
```

- `Ref 1`ï¼šMask ç»„ä»¶å†™å…¥ Stencil Bufferï¼Œå€¼ä¸º `1`ã€‚
- `Comp equal`ï¼šåªæœ‰ Stencil å€¼ä¸º `1` çš„åœ°æ–¹æ‰èƒ½ç»˜åˆ¶ UI å­å…ƒç´ ã€‚

### **ç‰¹ç‚¹**

âœ… **ä¼˜ç‚¹**

- **é€‚ç”¨äºå¤æ‚å½¢çŠ¶**ï¼ˆä¸å±€é™äºçŸ©å½¢ï¼‰ã€‚
- **æ”¯æŒéçŸ©å½¢é®ç½©**ï¼Œæ¯”å¦‚åœ†å½¢é®ç½©ã€é€æ˜é®ç½©ã€‚
- **å¯æ­é… `SoftMask` ç­‰å®ç°æ¸å˜é®ç½©**ã€‚

âŒ **ç¼ºç‚¹**

- **Stencil Buffer æ˜¯å…¨å±å…±äº«çš„**ï¼Œå¤šä¸ª `Mask` å¯èƒ½ä¼šç›¸äº’å½±å“ã€‚
- **Stencil Buffer ä»… 8 ä½**ï¼Œæœ€å¤šæ”¯æŒ 256 ç§å€¼ï¼Œæ•°é‡æœ‰é™ã€‚

------

## **2. `RectMask2D` ç»„ä»¶ï¼ˆClipping å‰”é™¤å®ç°ï¼‰**

### **åŸç†**

- **`RectMask2D` é€šè¿‡ UI ç»„ä»¶çš„ `RectTransform` å‰”é™¤è¶…å‡ºåŒºåŸŸçš„é¡¶ç‚¹**ã€‚
- **ä¸ä¼šä¿®æ”¹ Stencil Buffer**ï¼Œä¹Ÿä¸æ¶‰åŠé¢å¤–çš„æ¸²æŸ“æ­¥éª¤ã€‚
- **åŸºäº Canvas è¿›è¡Œå‰”é™¤**ï¼Œä»…å¯¹ UI ç»„ä»¶æœ‰æ•ˆã€‚

### **å·¥ä½œæµç¨‹**

1. `RectMask2D` **è®¡ç®—è£å‰ªåŒºåŸŸï¼ˆAABBï¼‰**ã€‚
2. **å¯¹æ‰€æœ‰å­å…ƒç´ çš„é¡¶ç‚¹è¿›è¡Œè£å‰ª**ï¼Œè¶…å‡ºèŒƒå›´çš„éƒ¨åˆ†ä¸ä¼šæäº¤åˆ° GPU è¿›è¡Œæ¸²æŸ“ã€‚
3. **åªç»˜åˆ¶å¯è§çš„ UI é¡¶ç‚¹**ï¼Œæå‡æ€§èƒ½ã€‚

### **ç‰¹ç‚¹**

âœ… **ä¼˜ç‚¹**

- **æ¯” `Mask` æ€§èƒ½æ›´é«˜**ï¼Œå› ä¸ºå‰”é™¤äº†ä¸å¿…è¦çš„é¡¶ç‚¹ï¼Œå‡å°‘äº†ç»˜åˆ¶çš„åƒç´ ã€‚
- **ä¸å ç”¨ Stencil Buffer**ï¼Œä¸ä¼šå—åˆ° `Mask` é™åˆ¶ã€‚
- **é€‚ç”¨äº ScrollViewã€UI åˆ—è¡¨ç­‰æ»šåŠ¨è£å‰ª**ã€‚

âŒ **ç¼ºç‚¹**

- **ä»…æ”¯æŒçŸ©å½¢åŒºåŸŸè£å‰ª**ï¼Œä¸èƒ½å®ç°éçŸ©å½¢é®ç½©ã€‚
- **ä¸æ”¯æŒæ¸å˜é®ç½©æˆ–å¤æ‚å½¢çŠ¶è£å‰ª**ã€‚

------

## **3. `Mask` vs. `RectMask2D` å¯¹æ¯”**

| **å±æ€§**         | **Maskï¼ˆStencil Testï¼‰**                      | **RectMask2Dï¼ˆClipping å‰”é™¤ï¼‰**              |
| ---------------- | --------------------------------------------- | -------------------------------------------- |
| **å®ç°æ–¹å¼**     | **Stencil Buffer æ¨¡æ¿æµ‹è¯•**                   | **è£å‰ª UI é¡¶ç‚¹æ•°æ®ï¼ˆAABB å‰”é™¤ï¼‰**            |
| **é®ç½©å½¢çŠ¶**     | **æ”¯æŒä»»æ„å½¢çŠ¶**ï¼ˆåœ†å½¢ã€å¤æ‚å½¢çŠ¶ï¼‰            | **ä»…æ”¯æŒçŸ©å½¢è£å‰ª**                           |
| **æ€§èƒ½**         | **å¼€é”€è¾ƒå¤§**ï¼ˆå¤šæ¬¡æ¸²æŸ“+Stencil Testï¼‰         | **æ€§èƒ½æ›´ä¼˜**ï¼ˆç›´æ¥å‰”é™¤é¡¶ç‚¹ï¼Œä¸æ¸²æŸ“è¶…å‡ºéƒ¨åˆ†ï¼‰ |
| **ä½¿ç”¨èŒƒå›´**     | **å¯ç”¨äºå¤æ‚ UI é®ç½©ï¼ˆåŠé€æ˜ã€æ¸å˜ï¼‰**        | **é€‚ç”¨äº UI ScrollViewã€åˆ—è¡¨æ»šåŠ¨**           |
| **Stencil ä¾èµ–** | **å ç”¨ Stencil Bufferï¼Œå¯èƒ½å½±å“å…¶ä»– UI ç»„ä»¶** | **ä¸ä¾èµ– Stencilï¼Œä¸å—å½±å“**                 |
| **é¢å¤–ç»˜åˆ¶**     | **éœ€è¦é¢å¤–ç»˜åˆ¶ Stencil Buffer**               | **ä¸éœ€è¦é¢å¤–ç»˜åˆ¶**                           |

------

## **4. å¦‚ä½•é€‰æ‹©ï¼Ÿ**

ğŸ”¹ **ä½¿ç”¨ `Mask`ï¼š**

- éœ€è¦**éçŸ©å½¢é®ç½©**ï¼ˆæ¯”å¦‚åœ†å½¢ã€æ¸å˜é®ç½©ï¼‰ã€‚
- UI ç»„ä»¶**ä¸å¤š**ï¼ŒStencil Buffer å¼€é”€å¯ä»¥æ¥å—ã€‚

ğŸ”¹ **ä½¿ç”¨ `RectMask2D`ï¼š**

- éœ€è¦**æ»šåŠ¨åˆ—è¡¨ã€ScrollView å‰ªè£**ï¼Œä¼˜åŒ–æ€§èƒ½ã€‚
- **åªéœ€çŸ©å½¢é®ç½©**ï¼Œä¸éœ€è¦å¤æ‚é®ç½©æ•ˆæœã€‚

------

## **5. ä»£ç ç¤ºä¾‹**

### **ä½¿ç”¨ `Mask` ç»„ä»¶**

```
csharpå¤åˆ¶ç¼–è¾‘using UnityEngine;
using UnityEngine.UI;

public class MaskExample : MonoBehaviour {
    void Start() {
        GameObject maskObject = new GameObject("Mask", typeof(RectTransform));
        maskObject.transform.SetParent(transform);

        Image maskImage = maskObject.AddComponent<Image>();
        maskImage.sprite = Resources.Load<Sprite>("MaskSprite");
        Mask mask = maskObject.AddComponent<Mask>();
        mask.showMaskGraphic = false; // åªæ˜¾ç¤ºé®ç½©çš„å†…å®¹

        GameObject maskedImage = new GameObject("MaskedImage", typeof(RectTransform));
        maskedImage.transform.SetParent(maskObject.transform);
        maskedImage.AddComponent<Image>().sprite = Resources.Load<Sprite>("ContentImage");
    }
}
```

### **ä½¿ç”¨ `RectMask2D` ç»„ä»¶**

```
csharpå¤åˆ¶ç¼–è¾‘using UnityEngine;
using UnityEngine.UI;

public class RectMaskExample : MonoBehaviour {
    void Start() {
        GameObject maskObject = new GameObject("RectMask2D", typeof(RectTransform));
        maskObject.transform.SetParent(transform);

        RectMask2D rectMask = maskObject.AddComponent<RectMask2D>();

        GameObject maskedImage = new GameObject("MaskedImage", typeof(RectTransform));
        maskedImage.transform.SetParent(maskObject.transform);
        maskedImage.AddComponent<Image>().sprite = Resources.Load<Sprite>("ContentImage");
    }
}
```

------

## **6. ç»“è®º**

| **é—®é¢˜**                     | **Mask**                       | **RectMask2D**     |
| ---------------------------- | ------------------------------ | ------------------ |
| **æ˜¯å¦åŸºäº Stencil Buffer?** | âœ… æ˜¯                           | âŒ ä¸æ˜¯             |
| **æ˜¯å¦é€šè¿‡å‰”é™¤å®ç°?**        | âŒ ä¸æ˜¯                         | âœ… æ˜¯               |
| **æ€§èƒ½**                     | ğŸ”´ è¾ƒé«˜æ¶ˆè€—ï¼ˆStencil é¢å¤–ç»˜åˆ¶ï¼‰ | ğŸŸ¢ æ›´ä¼˜ï¼ˆå‡å°‘æ¸²æŸ“ï¼‰ |
| **æ”¯æŒå¤æ‚å½¢çŠ¶?**            | âœ… æ˜¯ï¼ˆåœ†å½¢ã€æ¸å˜é®ç½©ï¼‰         | âŒ ä»…æ”¯æŒçŸ©å½¢       |
| **é€‚ç”¨äº ScrollView?**       | âŒ ä¸æ¨èï¼ˆæ€§èƒ½è¾ƒä½ï¼‰           | âœ… æœ€ä½³é€‰æ‹©         |

ğŸš€ **æœ€ä½³å®è·µ**

- **æƒ³è¦é«˜æ€§èƒ½ï¼Ÿ** ç”¨ `RectMask2D`ã€‚
- **æƒ³è¦å¤æ‚é®ç½©ï¼ˆéçŸ©å½¢ã€æ¸å˜ï¼‰ï¼Ÿ** ç”¨ `Mask`ã€‚

------

å¸Œæœ›è¿™ä¸ªè§£æèƒ½å¸®åŠ©ä½ ç†è§£ **`Mask` å’Œ `RectMask2D` çš„åº•å±‚å®ç°åŠå…¶åŒºåˆ«ï¼** ğŸ¯ å¦‚æœä½ æœ‰å…·ä½“çš„ä½¿ç”¨åœºæ™¯éœ€è¦ä¼˜åŒ–ï¼Œæ¬¢è¿è®¨è®ºï¼ğŸš€

# åç¨‹

https://zhuanlan.zhihu.com/p/35195150

https://blog.csdn.net/NRatel/article/details/102870744

## Unityæ¸²æŸ“é¡ºåº

https://zhuanlan.zhihu.com/p/628625904

https://zhuanlan.zhihu.com/p/406262140

## Unityåˆæ‰¹

https://zhuanlan.zhihu.com/p/697699342

https://zhuanlan.zhihu.com/p/432223843