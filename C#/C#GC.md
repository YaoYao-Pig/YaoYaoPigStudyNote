# GC

用的是可达性分析+压缩+分代的处理方法

这里说下压缩：

在一次GC结束之后，会有很多不可达的对象被回收了。这样的话这些对象所处的内存占用就不连续了，C#GC的时候会先停掉所有的线程，防止在GC的时候线程再修改。

然后GC会把回收后剩下的对象移动位置，让他们在托管堆上连续。然后重新修改对象中引用其他对象的偏移量（因为被移动压缩了）

![image-20250215135809574](./assets/image-20250215135809574.png)